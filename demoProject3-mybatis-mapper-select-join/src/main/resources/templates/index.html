<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="UTF-8">
<title>join 문을 활용해서 select 하기</title>
</head>

<body>
	<h1>Join을 활용해서 select 하기</h1>
	<!-- Mapper.xml 파일에 sql에서 정상적으로 작동하는
		 join문을 xml 파일에 ;을 제외하고 그대로 추가하면
		 정상적으로 작동이 가능
		 select의 경우에는 값을 sql db에서 정상적으로 
		 가져오지 않아도 에러가 발생하거나 select에서 가져오는
		 db 내용물만 보이지 않을 뿐이지 왜 안보이는지 
		 알수 없으므로 controller에서 Slf4j 어노테이션과
		 dto에서 toString 어노테이션을 활용해서 
		 값을 정상적으로 가져오는지 확인할 수 있음
	-->
	
	<table border="1">
		<thead>
			<tr>
				<th>과자명</th>
				<th>가격</th>
				<th>회사명</th>
				<th>회사번호</th>
				<th>회사주소</th>
				<th>과자상세페이지로 이동하기</th>
				<th>회사상세페이지로 이동하기</th>
			</tr>
		</thead>
		<tbody>
			<tr th:each="sc : ${snackAndCompany}" th:object="${sc}">
				<td th:text="*{snack_name}"></td>
				<td th:text="*{price}"></td>
				<td th:text="*{company_name}"></td>
				<td th:text="*{company_phone}"></td>
				<td th:text="*{company_address}"></td>
				<td><a th:href="@{'/snack/'+${sc.snack_id}}">이동하기</a></td>
				<!-- sql에서 시작하는 id 값이 1부터인데 0이 뜸
					 값을 가져오지 못한것 0 = null -->
				<td><a th:href="@{'/company/'+${sc.company_id}}">이동하기</a></td>
			</tr>
		</tbody>
	</table>
</body>
</html>